<% layout('admin/layout') -%>
<main class="container mx-auto mt-8 p-4">
        <div class="bg-white rounded-xl shadow-md overflow-hidden">
            <table class="w-full border-collapse">
                <thead class="bg-gray-50 border-b">
                    <tr>
                        <th class="p-4 text-left text-xs font-medium text-gray-500 uppercase">Nome / Email</th>
                        <th class="p-4 text-left text-xs font-medium text-gray-500 uppercase">Privilégio</th>
                        <th class="p-4 text-right text-xs font-medium text-gray-500 uppercase">Ações</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-200">
                    <% users.forEach(user => { %>
                    <tr class="hover:bg-gray-50">
                        <td class="p-4">
                            <div class="text-sm font-bold text-gray-900"><%= user.nome %></div>
                            <div class="text-xs text-gray-500"><%= user.email %></div>
                        </td>
                        <td class="p-4">
                            <% if (user.isAdmin) { %>
                                <span class="px-2 py-1 text-xs font-semibold bg-purple-100 text-purple-700 rounded-full">Administrador</span>
                            <% } else { %>
                                <span class="px-2 py-1 text-xs font-semibold bg-gray-100 text-gray-600 rounded-full">Servidor</span>
                            <% } %>
                        </td>
                        <td class="p-4 text-right space-x-2">
                            <form action="/admin/users/toggle/<%= user._id %>" method="POST" class="inline">
                                <button class="text-xs font-bold text-blue-600 hover:text-blue-800">
                                    <%= user.isAdmin ? 'Remover Admin' : 'Tornar Admin' %>
                                </button>
                            </form>
                            
                            <form action="/admin/users/delete/<%= user._id %>" method="POST" class="inline" onsubmit="return confirm('Tem certeza que deseja excluir este usuário?')">
                                <button class="text-xs font-bold text-red-600 hover:text-red-900">Excluir</button>
                            </form>
                        </td>
                    </tr>
                    <% }) %>
                </tbody>
            </table>
        </div>
</main>